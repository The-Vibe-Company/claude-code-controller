<!-- Generated by agents-reverse-engineer -->

# web/bin

This directory contains the CLI entry point for the published npm package. When users run `bunx the-vibe-companion`, execution starts here. The single file in this directory sets up the runtime environment and delegates to the Hono server.

## Contents

- **[cli.ts](./cli.ts)** — Shebang entry point that sets `__VIBE_PACKAGE_ROOT` and `NODE_ENV`, then imports `../server/index.ts` to start the server.

## Architecture

`cli.ts` solves the "invoked from arbitrary CWD" problem: when users run `bunx the-vibe-companion` from any directory, the server needs to locate its own `dist/` assets. This file computes the absolute path to `web/` using `import.meta.url`, writes it to `process.env.__VIBE_PACKAGE_ROOT`, and ensures production mode before handing control to the server.

## Data Flow

```
User runs `bunx the-vibe-companion`
  ↓
Bun executes web/bin/cli.ts (shebang)
  ↓
Sets process.env.__VIBE_PACKAGE_ROOT = resolved path to web/
Sets process.env.NODE_ENV = "production" (if undefined)
  ↓
Dynamically imports ../server/index.ts
  ↓
Server reads __VIBE_PACKAGE_ROOT to serve static assets from dist/
```

## Integration Points

`server/index.ts` consumes `process.env.__VIBE_PACKAGE_ROOT` to construct paths for serving the frontend bundle in production mode. Without this environment variable, the server cannot locate `dist/` when invoked via `bunx` from a directory outside the repository.

## Package.json Mapping

The root `web/package.json` `bin` field maps the `the-vibe-companion` command to this file, enabling the published package to be executed directly after `bunx` or global install.